(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-722ac3a2"],{"0a49":function(e,t,o){},b545:function(e,t,o){"use strict";var l=o("0a49"),s=o.n(l);s.a},e67b:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"rolesbox"},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"white","text-color":"#f999","active-text-color":"rgb(18,42,136)"},on:{select:e.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[e._v("角色管理")])],1),o("div",{staticClass:"rolesmain"},[o("div",{staticClass:"rolesfind"},[o("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-left":"10px"},attrs:{inline:!0,model:e.formInline,size:"small"}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"请输入角色"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),o("el-form-item",[o("el-button",{staticStyle:{"background-color":"rgb(54,116,255)",color:"white"},attrs:{icon:"el-icon-search"},on:{click:e.getRoleList}},[e._v("查询\n                    ")])],1)],1)],1),o("div",{staticClass:"rolesdata"},[o("el-row",{staticStyle:{"margin-bottom":"12px"}},[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加")]),o("el-button",{staticClass:"delete",attrs:{size:"small",icon:"el-icon-close"},on:{click:function(t){e.outVisible=!0}}},[e._v("删除\n                ")])],1),o("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{"margin-bottom":"15px"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":e.getRowClass},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"80"}}),o("el-table-column",{attrs:{label:"id",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.$index+1)+"\n                    ")]}}])}),o("el-table-column",{attrs:{prop:"roleName",label:"角色管理"}}),o("el-table-column",{attrs:{prop:"intro",label:"角色描述"}}),o("el-table-column",{attrs:{label:"操作",width:"245"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                        ")])]}}])})],1),o("div",{staticClass:"page",staticStyle:{display:"flex"}},[o("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"margin-left":"auto"}},[o("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagetotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)]),o("el-dialog",{staticClass:"editbox",attrs:{title:"添加",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[o("div",{staticClass:"information"},[o("div",{staticStyle:{width:"80%",margin:"0 auto"}},[o("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:e.addForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"角色名称",required:""}},[o("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.addForm.rolesname,callback:function(t){e.$set(e.addForm,"rolesname",t)},expression:"addForm.rolesname"}})],1),o("el-form-item",{attrs:{label:"角色描述"}},[o("el-input",{attrs:{placeholder:"请输入角色描述"},model:{value:e.addForm.intro,callback:function(t){e.$set(e.addForm,"intro",t)},expression:"addForm.intro"}})],1),o("el-form-item",{attrs:{label:"权限设置",required:""}},[o("el-tree",{ref:"tree",attrs:{data:e.addData,"show-checkbox":"","default-expand-all":"","node-key":"menu_id","highlight-current":"",props:e.addProps},on:{check:e.getCheckedKeys}})],1),o("el-form-item",{staticStyle:{"margin-left":"25px","margin-top":"50px"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRole()}}},[e._v("确定")])],1)],1)],1)])]),o("el-dialog",{staticClass:"editbox",attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[o("div",{staticClass:"information"},[o("div",{staticStyle:{width:"80%",margin:"0 auto"}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"角色名称",required:""}},[o("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.ruleForm.rolesname,callback:function(t){e.$set(e.ruleForm,"rolesname",t)},expression:"ruleForm.rolesname"}})],1),o("el-form-item",{attrs:{label:"角色描述"}},[o("el-input",{attrs:{placeholder:"请输入角色描述"},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1),o("el-form-item",{attrs:{label:"权限设置",required:""}},[o("el-tree",{ref:"tree",attrs:{data:e.addData,"show-checkbox":"","default-expand-all":"","node-key":"menu_id","highlight-current":"",props:e.addProps,"default-checked-keys":e.defaultrole},on:{check:e.getCheckedKeys}})],1),o("el-form-item",{staticStyle:{"margin-left":"25px","margin-top":"50px"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateRole()}}},[e._v("确定")])],1)],1)],1)])]),o("el-dialog",{attrs:{title:"删除",visible:e.outVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.outVisible=t}}},[o("span",[e._v("确认删除？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.outVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getdelRole()}}},[e._v("确 定")])],1)])],1)},s=[],a=(o("ac6a"),{data:function(){return{token:localStorage.getItem("token"),nemberName:localStorage.getItem("nemberName"),roleName:localStorage.getItem("roleName"),activeIndex2:"1",pagetotal:0,pageSize:10,pageNum:1,formInline:{user:""},outVisible:!1,tableData:[],currentPage:1,editVisible:!1,addVisible:!1,ruleForm:{rolesname:"",intro:"",roles:""},rules:{rolesname:[{required:!0}],roles:[{required:!0}]},data:[],defaultProps:{children:"children",label:"label"},addForm:{rolesname:"",intro:""},addrules:{rolesname:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},addData:[],addProps:{children:"sub_menu",label:"menu_name"},rolePermissionIds:[],roleIds:[],defaultrole:[],edit:{roleId:"",roleName:"",intro:""}}},methods:{handleSelect:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t),this.outVisible=!1},getRowClass:function(e){var t=e.rowIndex;return 0==t?"background:RGB(242,242,242)":""},submitbtn:function(){this.editVisible=!1},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e,this.getRoleList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.pageNum=e,this.getRoleList()},getRoleList:function(){var e=this;this.$api.post({path:"/manage/getRoleList",params:{token:this.token,roleName:this.formInline.user,pageSize:this.pageSize,pageNum:this.pageNum},success:function(t){console.log(t),e.tableData=t.data.list,e.pagetotal=t.data.total}})},rolePermissionsList:function(){var e=this;this.$api.post({path:"/manage/rolePermissionsList",params:{token:this.token},success:function(t){console.log(t),e.addData=t.data}})},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys()),this.rolePermissionIds=this.$refs.tree.getCheckedKeys()},addRole:function(){var e=this;""==this.addForm.rolesname?this.$message({message:"请输入角色名称",type:"warning"}):""==this.rolePermissionIds.join(",")?this.$message({message:"请选择权限",type:"warning"}):this.$api.post({path:"/manage/addRole",params:{token:this.token,roleName:this.addForm.rolesname,intro:this.addForm.intro,rolePermissionIds:this.rolePermissionIds.join(",")},success:function(t){console.log(t),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getRoleList(),e.addVisible=!1,e.addForm.rolesname=[],e.addForm.intro="",e.$refs.tree.setCheckedKeys([])):-1==t.code&&e.$message({message:t.msg,type:"warning"})}})},handleSelectionChange:function(e){this.multipleSelection=e,console.log(e);var t=[];e.forEach((function(e){t.push(e.roleId)})),this.roleIds=t,console.log(t)},getdelRole:function(){var e=this;0==this.roleIds.length?this.$message({message:"请选择要删除的角色",type:"warning"}):this.$api.post({path:"/manage/delRole",params:{token:this.token,roleIds:this.roleIds.join(",")},success:function(t){console.log(t),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getRoleList(),e.outVisible=!1):e.$message({message:t.msg,type:"error"})}})},handleEdit:function(e,t){console.log(e,t),this.editVisible=!0,this.defaultrole=t.menuIds,this.edit.roleId=t.roleId,this.ruleForm.rolesname=t.roleName,this.ruleForm.intro=t.intro,console.log(this.defaultrole)},updateRole:function(){var e=this,t=this.defaultrole.concat(this.roleIds);this.$api.post({path:"/manage/updateRole",params:{token:this.token,roleId:this.edit.roleId,roleName:this.ruleForm.rolesname,intro:this.ruleForm.intro,rolePermissionIds:t.join(",")},success:function(t){console.log(t),1==t.code&&(e.$message({message:t.msg,type:"success"}),e.getRoleList(),e.roleIds=[],e.editVisible=!1)}})}},mounted:function(){this.getRoleList(),this.rolePermissionsList()}}),i=a,r=(o("b545"),o("2877")),n=Object(r["a"])(i,l,s,!1,null,null,null);t["default"]=n.exports}}]);