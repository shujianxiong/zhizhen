(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7852a35c"],{"2d08":function(e,t,o){"use strict";var s=o("fc1b"),l=o.n(s);l.a},"496a":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"background"},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"white","text-color":"#f999","active-text-color":"rgb(18,42,136)"},on:{select:e.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[e._v("后台用户")])],1),o("div",{staticClass:"backmain"},[o("div",{staticClass:"backfind"},[o("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-left":"10px"},attrs:{inline:!0,model:e.formInline,size:"small"}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.formInline.account,callback:function(t){e.$set(e.formInline,"account",t)},expression:"formInline.account"}})],1),o("el-form-item",[o("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),o("el-form-item",[o("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),o("el-form-item",[o("el-select",{attrs:{placeholder:"请选择状态"},on:{change:e.getchange},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[o("el-option",{attrs:{label:"请选择状态",value:""}}),o("el-option",{attrs:{label:"正常",value:"0"}}),o("el-option",{attrs:{label:"禁用",value:"1"}})],1)],1),o("el-form-item",[o("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},attrs:{icon:"el-icon-search"},on:{click:e.getMemberfind}},[e._v("查询\n          ")])],1)],1)],1),o("div",{staticClass:"backdata"},[o("el-row",{staticStyle:{"margin-bottom":"12px"}},[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加")]),o("el-button",{staticClass:"recovery",attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){e.huifuVisible=!0}}},[e._v("恢复\n        ")]),o("el-button",{staticClass:"disable",attrs:{size:"small",icon:"el-icon-search"},on:{click:function(t){e.jinyongVisible=!0}}},[e._v("禁用")]),o("el-button",{staticClass:"delete",attrs:{size:"small",icon:"el-icon-close"},on:{click:function(t){e.outVisible=!0}}},[e._v("删除\n        ")])],1),o("el-table",{ref:"multipleTable2",staticClass:"table",staticStyle:{"margin-bottom":"15px"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":e.getRowClass},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"80"}}),o("el-table-column",{attrs:{label:"id",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n          ")]}}])}),o("el-table-column",{attrs:{prop:"account",label:"账号"}}),o("el-table-column",{attrs:{prop:"memberName",label:"姓名"}}),o("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),o("el-table-column",{attrs:{prop:"roleNames",label:"角色"}}),o("el-table-column",{attrs:{prop:"createTime",label:"开户时间"}}),o("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{directives:[{name:"show",rawName:"v-show",value:"0"==t.row.isForbid,expression:"scope.row.isForbid == '0'"}]},[e._v("正常")]),o("p",{directives:[{name:"show",rawName:"v-show",value:"1"==t.row.isForbid,expression:"scope.row.isForbid == '1'"}]},[e._v("禁用")])]}}])}),o("el-table-column",{attrs:{label:"操作",width:"245"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n            ")])]}}])})],1),o("div",{staticClass:"page",staticStyle:{display:"flex"}},[o("div",{staticClass:"grid-content bg-purple-light",staticStyle:{"margin-left":"auto"}},[o("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagetotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)]),o("el-dialog",{staticClass:"editbox",attrs:{title:"添加",visible:e.addVisible,width:"560px"},on:{"update:visible":function(t){e.addVisible=t}}},[o("div",{staticClass:"information"},[o("div",{staticStyle:{width:"80%",margin:"0 auto"}},[o("el-form",{ref:"addForm",staticClass:"demo-ruleForm",staticStyle:{margin:"0 auto"},attrs:{model:e.addForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"账号",required:""}},[o("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.addForm.account,callback:function(t){e.$set(e.addForm,"account",t)},expression:"addForm.account"}})],1),o("el-form-item",{attrs:{label:"密码",required:""}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.addForm.pass,callback:function(t){e.$set(e.addForm,"pass",t)},expression:"addForm.pass"}})],1),o("el-form-item",{attrs:{label:"确认密码",required:""}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.addForm.spass,callback:function(t){e.$set(e.addForm,"spass",t)},expression:"addForm.spass"}})],1),o("el-form-item",{attrs:{label:"姓名",required:""}},[o("el-input",{attrs:{placeholder:"请输入员工姓名"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),o("el-form-item",{attrs:{label:"手机号",required:""}},[o("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),o("el-form-item",{attrs:{label:"选择角色",required:""}},[o("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},on:{click:function(t){return e.getrolesType(1)}}},[e._v("\n              选择角色\n            ")]),o("div",{staticClass:"roleNames"},e._l(e.roleNames,(function(t){return o("el-tag",{key:t.name,attrs:{closable:"",type:t.type},on:{close:function(o){return e.handleClose(t)}}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1),o("el-form-item",{staticClass:"select",attrs:{label:"状态",required:""}},[o("el-select",{attrs:{placeholder:"请选择状态"},on:{change:e.getchange},model:{value:e.addForm.region,callback:function(t){e.$set(e.addForm,"region",t)},expression:"addForm.region"}},[o("el-option",{attrs:{label:"正常",value:"0"}}),o("el-option",{attrs:{label:"禁用",value:"1"}})],1)],1),o("div",{staticClass:"submitbtn",staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},on:{click:e.getaddMember}},[e._v("\n            确定\n          ")])],1)],1)])]),o("el-dialog",{staticClass:"editbox",attrs:{title:"编辑",visible:e.editVisible,width:"560px"},on:{"update:visible":function(t){e.editVisible=t}}},[o("div",{staticClass:"information"},[o("div",{staticStyle:{width:"80%",margin:"0 auto"}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{margin:"0 auto"},attrs:{model:e.ruleForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"账号",required:""}},[o("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),o("el-form-item",{attrs:{label:"密码",required:""}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),o("el-form-item",{attrs:{label:"确认密码",required:""}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.ruleForm.spass,callback:function(t){e.$set(e.ruleForm,"spass",t)},expression:"ruleForm.spass"}})],1),o("el-form-item",{attrs:{label:"姓名",required:""}},[o("el-input",{attrs:{placeholder:"请输入员工姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),o("el-form-item",{attrs:{label:"手机号",required:""}},[o("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),o("el-form-item",{attrs:{label:"选择角色",required:""}},[o("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},on:{click:function(t){return e.getrolesType(2)}}},[e._v("\n              选择角色\n            ")]),o("div",{staticClass:"roleNames"},e._l(e.ruleForm.roleNames,(function(t){return o("el-tag",{key:t.name,attrs:{closable:"",type:t.type},on:{close:function(o){return e.handleCloseE(t)}}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1),o("el-form-item",{staticClass:"select",attrs:{label:"状态",required:""}},[o("el-select",{attrs:{placeholder:"请选择状态"},on:{change:e.getisForbid},model:{value:e.ruleForm.region,callback:function(t){e.$set(e.ruleForm,"region",t)},expression:"ruleForm.region"}},[o("el-option",{attrs:{label:"正常",value:"0"}}),o("el-option",{attrs:{label:"禁用",value:"1"}})],1)],1),o("div",{staticClass:"submitbtn",staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},on:{click:function(t){return e.geteditMember()}}},[e._v("\n            确定\n          ")])],1)],1)])]),o("el-dialog",{staticClass:"rolesbox",attrs:{title:"选择角色",visible:e.roleselect,width:"30%"},on:{"update:visible":function(t){e.roleselect=t}}},[o("div",{staticClass:"information"},[o("div",{staticStyle:{width:"80%",margin:"0 auto"}},[o("el-form",{staticClass:"demo-ruleForm",staticStyle:{margin:"0 auto"},attrs:{model:e.rolesForm,inline:!0,"label-width":"100px",size:"small"}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.rolesForm.role,callback:function(t){e.$set(e.rolesForm,"role",t)},expression:"rolesForm.role"}})],1),o("el-form-item",[o("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},attrs:{icon:"el-icon-search"},on:{click:e.getfindrole}},[e._v("查询\n            ")])],1),o("el-form-item",[o("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},on:{click:function(t){e.roleselect=!1,e.getroles()}}},[e._v("确定\n            ")])],1)],1),o("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{"margin-bottom":"15px"},attrs:{border:"",data:e.rolesData,"tooltip-effect":"dark","header-cell-style":e.getRowClass},on:{"selection-change":e.getroleselect}},[o("el-table-column",{attrs:{type:"selection",width:"75"}}),o("el-table-column",{attrs:{label:"id",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.$index+1)+"\n            ")]}}])}),o("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),o("el-table-column",{attrs:{prop:"intro",label:"角色描述"}})],1)],1)])]),o("el-dialog",{attrs:{title:"删除",visible:e.outVisible,width:"30%","before-close":e.handleClose1},on:{"update:visible":function(t){e.outVisible=t}}},[o("span",[e._v("确认删除？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.outVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.outVisible=!1,e.getdelete()}}},[e._v("确 定")])],1)]),o("el-dialog",{attrs:{title:"恢复",visible:e.huifuVisible,width:"30%","before-close":e.handleClose2},on:{"update:visible":function(t){e.huifuVisible=t}}},[o("span",[e._v("确认恢复？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.huifuVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.huifuVisible=!1,e.getrecovery()}}},[e._v("确 定")])],1)]),o("el-dialog",{attrs:{title:"禁用",visible:e.jinyongVisible,width:"30%","before-close":e.handleClose3},on:{"update:visible":function(t){e.jinyongVisible=t}}},[o("span",[e._v("确认禁用？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.jinyongVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.jinyongVisible=!1,e.getDisable()}}},[e._v("确 定")])],1)])],1)},l=[],a=(o("ac6a"),o("7f7f"),{data:function(){return{outVisible:!1,token:localStorage.getItem("token"),nemberName:localStorage.getItem("nemberName"),roleName:localStorage.getItem("roleName"),account:localStorage.getItem("account"),isForbid:localStorage.getItem("isForbid"),phone:localStorage.getItem("phone"),activeIndex2:"1",formInline:{account:"",name:"",phone:"",region:""},pageNum:1,pageSize:10,tableData:[],ruleForm:{account:"",pass:"",spass:"",name:"",phone:"",region:"",memberId:"",roleIds:[],roleNames:[],roleList:[]},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],pass:[{required:!0,message:"请输入密码",trigger:"blur"}],spass:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入正确的手机号",trigger:"blur"}],region:[{required:!0,message:"请选择状态",trigger:"change"}]},addForm:{account:"",pass:"",spass:"",name:"",phone:"",region:""},addrules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],pass:[{required:!0,message:"请输入密码",trigger:"blur"}],spass:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入正确的手机号",trigger:"blur"}],region:[{required:!0,message:"请选择状态",trigger:"change"}]},editVisible:!1,addVisible:!1,rolesForm:{role:""},roleselect:!1,rolesData:[],pagetotal:0,list:[],editList:{},roleIds:[],roleNames:[],memberIds:[],roleList:[],roletype:"",huifuVisible:!1,jinyongVisible:!1,pass:"",spass:"",multipleSelection:[]}},methods:{handleSelect:function(e,t){console.log(e,t)},getRowClass:function(e){var t=e.rowIndex;return 0==t?"background:RGB(242,242,242)":""},handleClose1:function(e,t){console.log(e,t),this.outVisible=!1},handleClose2:function(e,t){console.log(e,t),this.huifuVisible=!1},handleClose3:function(e,t){console.log(e,t),this.jinyongVisible=!1},submitbtn:function(){this.editVisible=!1},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e,this.getMemberList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.pageNum=e,this.getMemberList()},getMemberList:function(){var e=this;this.$api.post({path:"/manage/getMemberList",params:{token:this.token,account:"",memberName:"",phone:"",isForbid:"",pageNum:this.pageNum,pageSize:this.pageSize},success:function(t){console.log(t),e.tableData=t.data.memberList,e.pagetotal=t.data.total}})},getchange:function(e){console.log(e),this.formInline.region=e,this.addForm.region=e,console.log(this.formInline.region)},getMemberfind:function(){var e=this;this.$api.post({path:"/manage/getMemberList",params:{token:this.token,account:this.formInline.account,memberName:this.formInline.name,phone:this.formInline.phone,isForbid:this.formInline.region},success:function(t){console.log(t),e.tableData=t.data.memberList,e.pagetotal=t.data.total}})},getAllRole:function(){var e=this;this.$api.post({path:"/manage/getAllRole",params:{token:this.token},success:function(t){console.log(t),e.rolesData=t.data}})},getfindrole:function(){var e=this;this.$api.post({path:"/manage/getAllRole",params:{token:this.token,roleName:this.rolesForm.role},success:function(t){console.log(t),e.rolesData=t.data}})},getrolesType:function(e){this.roleselect=!0,this.roletype=e},getroleselect:function(e){if(this.multipleSelection=e,console.log(e),"1"==this.roletype){var t=[],o=[];e.forEach((function(e){t.push(e.roleId),o.push({name:e.roleName,id:e.roleId,type:""})})),this.roleIds=t,this.roleNames=o}else{var s=[],l=[];e.forEach((function(e){s.push(e.roleId),l.push({name:e.roleName,id:e.roleId,type:""})})),this.ruleForm.roleIds=s,this.ruleForm.roleNames=l}},handleClose:function(e){this.roleNames.splice(this.roleNames.indexOf(e),1),console.log(this.roleNames);var t=[];this.roleNames.forEach((function(e){t.push(e.id)})),this.roleIds=t.join(","),console.log(t)},handleCloseE:function(e){this.ruleForm.roleNames.splice(this.ruleForm.roleNames.indexOf(e),1),console.log(this.ruleForm.roleNames,"bianji");var t=[];this.ruleForm.roleNames.forEach((function(e){t.push(e.id)})),this.ruleForm.roleIds=t.join(",")},getroles:function(){"1"==this.roletype?this.roleId==[]?this.$message({message:"请选择角色",type:"warning"}):(this.$message({message:"选择成功",type:"success"}),this.roleId=[]):this.ruleForm.roleId==[]?this.$message({message:"请选择角色",type:"warning"}):(this.$message({message:"选择成功",type:"success"}),this.ruleForm.roleId=[])},getaddMember:function(){var e=this;""==this.addForm.name||""==this.addForm.account||""==this.addForm.pass||""==this.addForm.spass||""==this.addForm.phone||""==this.roleIds.join(",")||""==this.addForm.region?this.$message({message:"请将信息填写完整",type:"warning"}):this.$api.post({path:"/manage/addMember",params:{token:this.token,memberId:0,memberName:this.addForm.name,account:this.addForm.account,pwd:this.addForm.pass,phone:this.addForm.phone,rolenames:this.roleIds.join(","),isForbid:this.addForm.region},success:function(t){console.log(t),e.addVisible=!1,e.getMemberList(),e.addForm.name="",e.addForm.account="",e.addForm.pass="",e.addForm.phone="",e.addForm.spass="",e.roleId="",e.$refs.multipleTable.clearSelection(),e.addForm.region="",e.roleNames=[],e.getMemberList(),e.getfindrole()}})},handleSelectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.memberId)})),this.memberIds=t,console.log(t,"用户id")},handleEdit:function(e,t){console.log(e,t),this.editVisible=!0,this.memberId=t.memberId,this.ruleForm.account=t.account,this.pass=t.pwd,this.ruleForm.name=t.memberName,this.ruleForm.phone=t.phone,this.spass=t.pwd,this.ruleForm.region=t.isForbid;var o=[],s=[];t.roleList.forEach((function(e){o.push({name:e.roleName,id:e.roleId,type:""}),s.push(e.roleId)})),this.ruleForm.roleNames=o,this.ruleForm.roleIds=s},getisForbid:function(e){this.ruleForm.region=e},geteditMember:function(){var e=this;this.$api.post({path:"/manage/addMember",params:{token:this.token,memberId:this.memberId,memberName:this.ruleForm.name,account:this.ruleForm.account,pwd:this.ruleForm.pass,phone:this.ruleForm.phone,rolenames:this.ruleForm.roleIds.join(","),isForbid:this.ruleForm.region},success:function(t){console.log(t),1==t.code&&(e.$message({message:t.msg,type:"success"}),e.getMemberList(),e.editVisible=!1,e.getfindrole())}})},getdelete:function(){var e=this;""==this.memberIds.join(",")?this.$message({message:"请选择要删除的用户",type:"warning"}):this.$api.post({path:"/manage/operationMember",params:{token:this.token,type:3,memberIds:this.memberIds.join(",")},success:function(t){console.log(t),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getMemberList()):e.$message.error(t.msg)}})},getDisable:function(){var e=this;""==this.memberIds.join(",")?this.$message({message:"请选择要禁用的用户",type:"warning"}):this.$api.post({path:"/manage/operationMember",params:{token:this.token,type:1,memberIds:this.memberIds.join(",")},success:function(t){console.log(t),1==t.code&&(e.$message({message:t.msg,type:"success"}),e.getMemberList())}})},getrecovery:function(){var e=this;""==this.memberIds.join(",")?this.$message({message:"请选择要恢复的用户",type:"warning"}):this.$api.post({path:"/manage/operationMember",params:{token:this.token,type:2,memberIds:this.memberIds.join(",")},success:function(t){console.log(t),1==t.code&&(e.$message({message:t.msg,type:"success"}),e.getMemberList())}})}},mounted:function(){this.getMemberList(),this.getAllRole()}}),i=a,r=(o("2d08"),o("2877")),n=Object(r["a"])(i,s,l,!1,null,null,null);t["default"]=n.exports},"7f7f":function(e,t,o){var s=o("86cc").f,l=Function.prototype,a=/^\s*function ([^ (]*)/,i="name";i in l||o("9e1e")&&s(l,i,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},fc1b:function(e,t,o){}}]);