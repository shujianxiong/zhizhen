(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e216ed4"],{"4c72":function(e,t,a){"use strict";var s=a("4f76"),n=a.n(s);n.a},"4f76":function(e,t,a){},bafa:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"salelist"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"white","text-color":"#f999","active-text-color":"rgb(18,42,136)"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("售后列表")])],1),a("div",{staticClass:"salemain"},[a("div",{staticClass:"salefind"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-left":"10px"},attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入退款编号"},model:{value:e.formInline.refundno,callback:function(t){e.$set(e.formInline,"refundno",t)},expression:"formInline.refundno"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入订单编号"},model:{value:e.formInline.orderno,callback:function(t){e.$set(e.formInline,"orderno",t)},expression:"formInline.orderno"}})],1),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"申请时间","end-placeholder":"申请时间","value-format":"yyyy-MM-dd"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}}),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.formInline.nick,callback:function(t){e.$set(e.formInline,"nick",t)},expression:"formInline.nick"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入用户手机号"},model:{value:e.formInline.phone,callback:function(t){e.$set(e.formInline,"phone",t)},expression:"formInline.phone"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择售后状态"},model:{value:e.formInline.salestate,callback:function(t){e.$set(e.formInline,"salestate",t)},expression:"formInline.salestate"}},[a("el-option",{attrs:{label:"待审核",value:"1"}}),a("el-option",{attrs:{label:"审核通过",value:"2"}}),a("el-option",{attrs:{label:"审核不通过",value:"3"}})],1)],1),a("el-form-item",[a("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},attrs:{icon:"el-icon-search"},on:{click:e.getfind}},[e._v("\n            查询\n          ")])],1)],1)],1),a("div",{staticClass:"saledata"},[a("el-row",{staticStyle:{"margin-bottom":"12px"}},[a("el-button",{staticClass:"commonbtn",attrs:{size:"small",icon:"iconfont iconinport"},on:{click:e.getexport}},[e._v("导出")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{"margin-bottom":"15px","font-size":"14px"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":e.getRowClass},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"id",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"refundNo",label:"退款编号"}}),a("el-table-column",{attrs:{prop:"orderNo",label:"订单编号"}}),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间"}}),a("el-table-column",{attrs:{prop:"nickName",label:"用户昵称"}}),a("el-table-column",{attrs:{prop:"phone",label:"用户手机号"}}),a("el-table-column",{attrs:{prop:"refundAmount",label:"退款金额"}}),a("el-table-column",{attrs:{prop:"refundStatus",label:"售后状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{directives:[{name:"show",rawName:"v-show",value:1==t.row.refundStatus,expression:"scope.row.refundStatus == 1"}]},[e._v("申请中")]),a("p",{directives:[{name:"show",rawName:"v-show",value:2==t.row.refundStatus,expression:"scope.row.refundStatus == 2"}]},[e._v("退货中")]),a("p",{directives:[{name:"show",rawName:"v-show",value:3==t.row.refundStatus,expression:"scope.row.refundStatus == 3"}]},[e._v("退货成功")]),a("p",{directives:[{name:"show",rawName:"v-show",value:4==t.row.refundStatus,expression:"scope.row.refundStatus == 4"}]},[e._v("审核驳回")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.details(t.$index,t.row)}}},[e._v("详情\n            ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.row.refundStatus,expression:"scope.row.refundStatus == 2"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.receiving(t.$index,t.row)}}},[e._v("确认收货\n            ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.refundStatus,expression:"scope.row.refundStatus == 1"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.examine(t.$index,t.row)}}},[e._v("审核\n            ")])]}}])})],1),a("div",{staticClass:"salefoot",staticStyle:{display:"flex"}},[a("div",[a("span",[e._v("订单数量："+e._s(e.tableData.length))]),a("span",[e._v("退款金额："+e._s(e._f("numFilter")(e.totalPrice))+"元")])]),a("div",{staticClass:"page",staticStyle:{"margin-left":"auto"}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagetotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])],1)]),a("el-dialog",{attrs:{title:"详情",visible:e.detailsVisible,width:"45%"},on:{"update:visible":function(t){e.detailsVisible=t}}},[a("div",{staticClass:"information"},[a("div",{staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticClass:"salesmessage"},[a("P",[a("i",{staticClass:"iconfont iconjinqi"}),e._v("订单信息")]),a("div",{staticClass:"salesnews"},[a("div",[e._v("退款编号："+e._s(e.saledetails.refundNo))]),a("div",[e._v("订单编号："+e._s(e.saledetails.orderNo))]),a("div",[e._v("申请时间："+e._s(e.saledetails.createTime))]),a("div",[e._v("\n              订单状态：\n              "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.saledetails.refundStatus,expression:"saledetails.refundStatus == 1"}],staticStyle:{color:"rgb(56, 118, 255)"}},[e._v("待审核")]),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.saledetails.refundStatus,expression:"saledetails.refundStatus == 2"}],staticStyle:{color:"rgb(56, 118, 255)"}},[e._v("退货中")]),a("span",{directives:[{name:"show",rawName:"v-show",value:3==e.saledetails.refundStatus,expression:"saledetails.refundStatus == 3"}],staticStyle:{color:"rgb(56, 118, 255)"}},[e._v("审核通过")]),a("span",{directives:[{name:"show",rawName:"v-show",value:4==e.saledetails.refundStatus,expression:"saledetails.refundStatus == 4"}],staticStyle:{color:"rgb(56, 118, 255)"}},[e._v("审核不通过")])]),a("div",[e._v("退款金额："+e._s(e.saledetails.refundAmount)+"元")])]),a("el-table",{ref:"multipleTable",staticStyle:{"margin-bottom":"15px","font-size":"14px"},attrs:{border:"",data:e.message,"tooltip-effect":"dark","header-cell-style":e.getRowClass},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"45"}}),a("el-table-column",{attrs:{label:"商品封面图"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.coverImg,height:"50",width:"50"}})]}}])}),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goodsclass",label:"商品分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.firstCateName)+"-"+e._s(t.row.secondCateName)+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"num",label:"数量"}}),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),a("el-table-column",{attrs:{prop:"total",label:"总价"}})],1)],1),a("div",{staticClass:"salemessage"},[a("P",[a("i",{staticClass:"iconfont iconjinqi"}),e._v("售后信息")]),a("div",[e._v("退款理由："+e._s(e.saledetails.refundReason))]),a("div",{staticClass:"evaluatebox"},[a("span",[e._v("图片：")]),a("div",{staticClass:"evaluateimg"},e._l(e.refundImgList,(function(e){return a("img",{key:e.orderRefundImgId,attrs:{src:e.src,alt:""}})})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.saledetails.refundStatus||3==e.saledetails.refundStatus||4==e.saledetails.refundStatus,expression:"saledetails.refundStatus == 2 || saledetails.refundStatus == 3 || saledetails.refundStatus == 4"}]},[e._v("\n            审核时间："+e._s(e.saledetails.approveTime))]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.saledetails.refundStatus||4==e.saledetails.refundStatus,expression:"saledetails.refundStatus == 2 || saledetails.refundStatus == 4"}]},[e._v("驳回原因："+e._s(e.saledetails.rejectReason))])],1)])])]),a("el-dialog",{attrs:{title:"审核",visible:e.examineVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.examineVisible=t}}},[a("div",{staticClass:"information"},[a("div",{staticClass:"examinebox",staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticClass:"salemessage"},[a("P",[a("i",{staticClass:"iconfont iconjinqi"}),e._v("申请信息")]),a("div",[e._v("退款编号："+e._s(e.examinedata.refundNo))]),a("div",[e._v("退款金额："+e._s(e.examinedata.refundAmount)+"元")]),a("div",[e._v("申请时间："+e._s(e.examinedata.createTime))]),a("div",[e._v("退货理由："+e._s(e.examinedata.refundReason))]),a("div",{staticClass:"evaluatebox"},[a("span",[e._v("图片：")]),a("div",{staticClass:"evaluateimg"},e._l(e.refundImgList,(function(e){return a("img",{key:e.orderRefundImgId,attrs:{src:e.src,alt:""}})})),0)])],1),a("div",{staticClass:"salemessage"},[a("P",[a("i",{staticClass:"iconfont iconjinqi"}),e._v("审核信息")]),a("el-form",{ref:"forms",attrs:{model:e.forms,"label-width":"80px","label-position":"left"}},[a("el-form-item",{staticClass:"shenhe",attrs:{label:"审核"}},[a("el-radio-group",{on:{change:e.agreeChange},model:{value:e.forms.resource,callback:function(t){e.$set(e.forms,"resource",t)},expression:"forms.resource"}},[a("el-radio",{attrs:{label:2}},[e._v("通过")]),a("el-radio",{attrs:{label:4}},[e._v("不通过")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.btnstatus,expression:"!btnstatus"}],staticStyle:{width:"100%"}},[a("el-form-item",{attrs:{label:"驳回理由"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.forms.desc,callback:function(t){e.$set(e.forms,"desc",t)},expression:"forms.desc"}})],1)],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},on:{click:function(t){e.examineVisible=!1,e.approveOrderRefund()}}},[e._v("确定\n              ")])],1)],1)],1)])])]),a("el-dialog",{attrs:{title:"确认收货",visible:e.receivVisible,width:"25%"},on:{"update:visible":function(t){e.receivVisible=t}}},[a("div",{staticClass:"information"},[a("div",{staticClass:"examinebox",staticStyle:{width:"100%",margin:"0 auto"}},[a("p",[e._v("确认是否收到客户的退货？")]),a("div",{staticStyle:{"margin-left":"auto",width:"50%"}},[a("el-button",{attrs:{type:"info"},on:{click:function(t){e.receivVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.receivVisible=!1,e.confirmGoods()}}},[e._v("确定")])],1)])])])],1)},n=[],i=(a("ac6a"),{data:function(){return{activeIndex2:"1",currentPage:1,token:localStorage.getItem("token"),pagetotal:0,pageNum:1,pageSize:10,formInline:{refundno:"",orderno:"",nick:"",phone:"",time:"",salestate:""},totalPrice:0,tableData:[],detailsVisible:!1,saledetails:{},refundImgList:[],message:[],examineVisible:!1,examinedata:{},forms:{resource:2,desc:"",id:"",status:""},btnstatus:!0,receivVisible:!1,refundId:""}},methods:{handleSelect:function(e,t){console.log(e,t)},handleSelectionChange:function(e){this.multipleSelection=e},getRowClass:function(e){var t=e.rowIndex;return 0==t?"background:RGB(242,242,242)":""},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e,this.getRefundList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.pageNum=e,this.getRefundList()},getRefundList:function(){var e=this;this.$api.post({path:"/manage/getRefundList",params:{token:this.token,refundNo:"",orderNo:"",startTime:"",endTime:"",nickName:"",phone:"",refundStatus:"",pageNum:this.pageNum,pageSize:this.pageSize},success:function(t){console.log(t),e.tableData=t.data.list,e.pagetotal=t.data.total,e.totalP()}})},getexport:function(){var e={token:this.token,type:4};this.$download("http://manager.zhizhennengyuan.com:8000/manage/export",e,"售后列表").then((function(e){console.log(e,"res1")}))},details:function(e,t){var a=this;console.log(e,t),this.detailsVisible=!0,this.$api.post({path:"/manage/getRefundDetail",params:{token:this.token,refundId:t.refundId},success:function(e){console.log(e),a.saledetails=e.data,a.refundImgList=e.data.orderRefundImgList,a.message=e.data.orderGoodsList}})},getPaytype:function(e){console.log(e),this.formInline.salestate=e},getfind:function(){var e=this;this.$api.post({path:"/manage/getRefundList",params:{token:this.token,refundNo:this.formInline.refundno,orderNo:this.formInline.orderno,startTime:this.formInline.time[0],endTime:this.formInline.time[0],nickName:this.formInline.nick,phone:this.formInline.phone,refundStatus:this.formInline.salestate},success:function(t){console.log(t),e.tableData=t.data.list,e.totalP()}})},totalP:function(){var e=0;this.tableData.forEach((function(t){e+=t.refundAmount})),this.totalPrice=e},examine:function(e,t){var a=this;console.log(e,t),this.examineVisible=!0,this.$api.post({path:"/manage/getRefundDetail",params:{token:this.token,refundId:t.refundId},success:function(e){console.log(e),a.examinedata=e.data,a.refundImgList=e.data.orderRefundImgList,a.forms.id=e.data.refundId}})},agreeChange:function(e){var t=this;t.btnstatus=1==e,console.log(e),t.forms.resource=e},approveOrderRefund:function(){var e=this;this.$api.post({path:"/manage/approveOrderRefund",params:{token:this.token,refundId:this.forms.id,refund_status:this.forms.resource,reject_reason:this.forms.desc},success:function(t){console.log(t),1==t.code&&(e.$message({message:t.msg,type:"success"}),e.getRefundList())}})},receiving:function(e,t){console.log(e,t),this.receivVisible=!0,this.refundId=t.refundId},confirmGoods:function(){var e=this;this.$api.post({path:"/manage/confirmGoods",params:{token:this.token,refundId:this.refundId},success:function(t){console.log(t),1==t.code&&(e.$message({message:t.msg,type:"success"}),e.getRefundList())}})}},mounted:function(){this.getRefundList()},filters:{numFilter:function(e){var t=parseFloat(e).toFixed(2);return t}},watch:{"formInline.time":function(e){null==e&&(this.formInline.time=[])}}}),l=i,o=(a("4c72"),a("2877")),r=Object(o["a"])(l,s,n,!1,null,null,null);t["default"]=r.exports}}]);