(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-299bbac8"],{"032f":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inforbox"},[i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"white","text-color":"#f999","active-text-color":"rgb(18,42,136)"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"1"}},[e._v("热点资讯")])],1),i("div",{staticClass:"informain"},[i("div",{staticClass:"inforfind"},[i("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-left":"10px"},attrs:{inline:!0,model:e.formInline,size:"small","label-position":"left"}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入资讯标题"},model:{value:e.formInline.title,callback:function(t){e.$set(e.formInline,"title",t)},expression:"formInline.title"}})],1),i("el-form-item",[i("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.formInline.type,callback:function(t){e.$set(e.formInline,"type",t)},expression:"formInline.type"}},[i("el-option",{attrs:{label:"请选择类型",value:""}}),i("el-option",{attrs:{label:"图文",value:"1"}}),i("el-option",{attrs:{label:"视频",value:"2"}})],1)],1),i("el-form-item",[i("el-button",{staticStyle:{"background-color":"rgb(54, 116, 255)",color:"white"},attrs:{icon:"el-icon-search"},on:{click:e.getfind}},[e._v("查询\n                    ")])],1)],1)],1),i("div",{staticClass:"infordata"},[i("el-row",{staticStyle:{"margin-bottom":"12px"}},[i("el-button",{staticClass:"commonbtn",attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加\n                ")]),i("el-button",{staticClass:"delete",attrs:{size:"small",icon:"el-icon-close"},on:{click:e.getdelete}},[e._v("删除")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{"margin-bottom":"15px","font-size":"14px"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark","header-cell-style":e.getRowClass},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"id",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.$index+1)+"\n                    ")]}}])}),i("el-table-column",{attrs:{prop:"infoTitle",label:"资讯标题"}}),i("el-table-column",{attrs:{prop:"createTime",label:"发布时间"}}),i("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.row.infoType,expression:"scope.row.infoType == 1"}]},[e._v("图文")]),i("p",{directives:[{name:"show",rawName:"v-show",value:2==t.row.infoType,expression:"scope.row.infoType == 2"}]},[e._v("视频")])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.details(t.$index,t.row)}}},[e._v("详情\n                        ")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.edit(t.$index,t.row)}}},[e._v("编辑\n                        ")])]}}])})],1),i("div",{staticClass:"page",staticStyle:{position:"relative"}},[i("div",{staticClass:"grid-content bg-purple-light",staticStyle:{position:"absolute",right:"0"}},[i("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagetotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)]),i("el-dialog",{staticClass:"banneradd",attrs:{title:"添加",visible:e.addVisible,width:"835px"},on:{"update:visible":function(t){e.addVisible=t}}},[i("div",{staticClass:"information"},[i("div",{staticStyle:{width:"100%",margin:"0 auto"}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px","label-position":"left",inline:!0}},[i("el-form-item",{attrs:{label:"资讯标题",required:""}},[i("el-input",{attrs:{placeholder:"请输入资讯标题"},model:{value:e.ruleForm.imgname,callback:function(t){e.$set(e.ruleForm,"imgname",t)},expression:"ruleForm.imgname"}})],1),i("br"),i("el-form-item",{attrs:{label:"图片",required:""}},[i("el-upload",{attrs:{action:"","list-type":"picture-card",accept:".jpg,.jpeg,.png,.JPG,.JPEG,.PNG","http-request":e.uploadImgs,"show-file-list":!1}},[i("i",{staticClass:"el-icon-camera-solid"})]),i("div",{staticClass:"userimage"},[e.imgurl?i("img",{staticClass:"avatar",attrs:{src:e.imgurl}}):e._e()]),i("p",{staticClass:"pbox"},[e._v("推荐尺寸为220*160")])],1),i("br"),i("el-form-item",{attrs:{label:"选择类型",prequired:""}},[i("el-radio-group",{on:{change:e.agreeChange},model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[i("el-radio",{attrs:{label:1,value:"1"}},[e._v("图文")]),i("el-radio",{attrs:{label:2,value:"2"}},[e._v("视频")])],1)],1),i("br"),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.ruleForm.resource,expression:"ruleForm.resource==1"}],attrs:{label:"html文件",required:""}},[i("tinymce-editor",{ref:"tinymce",attrs:{init:e.init},model:{value:e.ruleForm.html,callback:function(t){e.$set(e.ruleForm,"html",t)},expression:"ruleForm.html"}})],1),i("br"),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.ruleForm.resource,expression:"ruleForm.resource==2"}],attrs:{label:"视频",required:""}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"","http-request":e.vuploadImgs,accept:".mp4","show-file-list":!1}},[i("el-button",{staticStyle:{"margin-top":"10px","background-color":"rgb(54, 116, 255)",color:"white"},attrs:{size:"small",icon:"el-icon-upload"}},[e._v("上传\n                            ")])],1),i("div",{staticClass:"userimage"},[e.vimgurl?i("video",{staticClass:"avatar",attrs:{src:e.vimgurl,width:"200",height:"100",controls:""}}):e._e()])],1),i("br"),i("el-form-item",{attrs:{label:" "}},[i("el-button",{staticStyle:{"background-color":"rgb(54,116,255)",color:"white"},on:{click:function(t){return e.addInfo()}}},[e._v("\n                            确定\n                        ")])],1)],1)],1)])]),i("el-dialog",{staticClass:"banneradd",attrs:{title:"详情",visible:e.detailsVisible,width:"45%"},on:{"update:visible":function(t){e.detailsVisible=t}}},[i("div",{staticClass:"information"},[i("div",{staticStyle:{width:"100%",margin:"0 auto"}},[i("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("资讯标题："+e._s(e.detailsf.infoTitle))]),i("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n                    封面图：\n                    "),i("br"),i("img",{staticStyle:{width:"135px",height:"75px"},attrs:{src:e.detailsf.coverImg,alt:""}})]),i("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("类型："+e._s(1==e.detailsf.infoType?"图文":"视频"))]),i("div",{directives:[{name:"show",rawName:"v-show",value:"1"==e.detailsf.infoType,expression:"detailsf.infoType == '1'"}]},[i("p",[e._v("图文详情：")]),i("tinymce-editor",{ref:"tinymce2",attrs:{init:e.init},model:{value:e.detailsf.content,callback:function(t){e.$set(e.detailsf,"content",t)},expression:"detailsf.content"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.detailsf.infoType,expression:"detailsf.infoType == '2'"}]},[i("p",[e._v("视频：")]),i("video",{attrs:{src:e.detailsf.content,"initial-time":"0",autoplay:"false",controls:""}})])])])]),i("el-dialog",{staticClass:"banneradd",attrs:{title:"编辑",visible:e.editVisible,width:"835px"},on:{"update:visible":function(t){e.editVisible=t}}},[i("div",{staticClass:"information"},[i("div",{staticStyle:{width:"100%",margin:"0 auto"}},[i("el-form",{ref:"editf",staticClass:"demo-ruleForm",attrs:{model:e.editf,"label-width":"100px","label-position":"left",inline:!0}},[i("el-form-item",{attrs:{label:"资讯标题",required:""}},[i("el-input",{attrs:{placeholder:"请输入资讯标题"},model:{value:e.editf.imgname,callback:function(t){e.$set(e.editf,"imgname",t)},expression:"editf.imgname"}})],1),i("br"),i("el-form-item",{attrs:{label:"封面图",required:""}},[i("el-upload",{attrs:{action:"","list-type":"picture-card",accept:".jpg,.jpeg,.png,.JPG,.JPEG,.PNG","http-request":e.EuploadImgs,"show-file-list":!1}},[i("i",{staticClass:"el-icon-camera-solid"})]),i("div",{staticClass:"userimage"},[e.editf.imgurl?i("img",{staticClass:"avatar",attrs:{src:e.editf.imgurl}}):e._e()]),i("p",[e._v("推荐尺寸为220*160")])],1),i("br"),i("el-form-item",{attrs:{label:"选择类型",required:""}},[i("el-radio-group",{model:{value:e.editf.resource,callback:function(t){e.$set(e.editf,"resource",t)},expression:"editf.resource"}},[i("el-radio",{attrs:{label:"1"},model:{value:e.editf.resource,callback:function(t){e.$set(e.editf,"resource",t)},expression:"editf.resource"}},[e._v("图文")]),i("el-radio",{attrs:{label:"2"},model:{value:e.editf.resource,callback:function(t){e.$set(e.editf,"resource",t)},expression:"editf.resource"}},[e._v("视频")])],1)],1),i("br"),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editf.resource,expression:"editf.resource==1"}],attrs:{label:"html文件",required:""}},[i("tinymce-editor",{ref:"tinymce3",attrs:{init:e.init},model:{value:e.editf.html,callback:function(t){e.$set(e.editf,"html",t)},expression:"editf.html"}})],1),i("br"),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.editf.resource,expression:"editf.resource==2"}],attrs:{label:"视频",required:""}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"","http-request":e.EvuploadImgs,accept:".mp4","show-file-list":!1}},[i("el-button",{staticStyle:{"margin-top":"10px","background-color":"rgb(54, 116, 255)",color:"white"},attrs:{size:"small",icon:"el-icon-upload"}},[e._v("上传\n                            ")])],1),i("div",{staticClass:"userimage"},[e.editf.vimgurl?i("video",{staticClass:"avatar",attrs:{src:e.editf.vimgurl,width:"200",height:"100",controls:""}}):e._e()])],1),i("br"),i("el-form-item",{attrs:{label:" "}},[i("el-button",{staticStyle:{"background-color":"rgb(54,116,255)",color:"white"},on:{click:e.EaddInfo}},[e._v("\n                            确定\n                        ")])],1)],1)],1)])])],1)},a=[],s=(i("a481"),i("ac6a"),i("bc3a"),{data:function(){return{activeIndex2:"1",pageNum:1,pageSize:10,token:localStorage.getItem("token"),pagetotal:0,formInline:{title:"",type:""},tableData:[],addVisible:!1,detailsVisible:!1,editVisible:!1,ruleForm:{imgname:"",type:"",link:"",goodsName:"",ordid:"",html:"",resource:1,infoTitle:""},rules:{imgname:[{required:!0,message:"请输入图片名称",trigger:"blur"}],resource:[{required:!0,message:"请选择类型",trigger:"change"}],goodsName:[{required:!0,message:"请选择商品",trigger:"blur"}],pic:[{required:!0,trigger:"change"}],html:[{required:!0,trigger:"change"}]},imageUrl:"",imgurl:"",vUrl:"",vimgurl:"",detailsf:{content:"",coverImg:"",infoTitle:"",infoType:""},editf:{imgname:"",type:"",link:"",goodsName:"",ordid:"",html:"",resource:"1",infoTitle:"",imageUrl:"",imgurl:"",infoId:"",vUrl:"",vimgurl:""},erules:{imgname:[{required:!0,message:"请输入图片名称",trigger:"blur"}],resource:[{required:!0,message:"请选择类型",trigger:"change"}],goodsName:[{required:!0,message:"请选择商品",trigger:"blur"}],pic:[{required:!0,trigger:"change"}],html:[{required:!0,trigger:"change"}]},infoIds:[],html:""}},methods:{handleSelect:function(e,t){console.log(e,t)},handleSelectionChange:function(e){this.multipleSelection=e;var t=[];e.forEach((function(e){t.push(e.infoId)})),this.infoIds=t},getRowClass:function(e){var t=e.rowIndex;return 0==t?"background:RGB(242,242,242)":""},change:function(e,t){this.html=t},changes:function(e,t){this.html=t},getchange:function(e){console.log(e),this.formInline.type=e},getfind:function(){var e=this;this.$api.post({path:"/manage/getInfoList",params:{token:this.token,infoTitle:this.formInline.title,infoType:this.formInline.type,pageNum:this.pageNum,pageSize:this.pageSize},success:function(t){console.log(t),e.tableData=t.data.list,e.pagetotal=t.data.total}})},addInfo:function(){var e=this;""==this.ruleForm.imgname||""==this.imageUrl?this.$message({message:"请将信息填写完整",type:"warning"}):1==this.ruleForm.resource?""==this.ruleForm.html?this.$message({message:"请填写html文件",type:"warning"}):(this.ruleForm.infoTitle=this.ruleForm.html,this.$api.post({path:"/manage/addInfo",params:{token:this.token,type:1,infoTitle:this.ruleForm.imgname,coverImg:this.imageUrl,infoType:this.ruleForm.resource,content:this.ruleForm.infoTitle},success:function(t){console.log(t),1==t.code&&(e.getfind(),e.addVisible=!1,e.$message({message:t.msg,type:"success"}),e.ruleForm.imgname="",e.imgurl="",e.ruleForm.html="",e.ruleForm.infoTitle="",e.imageUrl="")}})):(this.ruleForm.infoTitle=this.vUrl,this.$api.post({path:"/manage/addInfo",params:{token:this.token,type:1,infoTitle:this.ruleForm.imgname,coverImg:this.imageUrl,infoType:this.ruleForm.resource,content:this.ruleForm.infoTitle},success:function(t){console.log(t),1==t.code&&(e.getfind(),e.addVisible=!1,e.$message({message:t.msg,type:"success"}),e.ruleForm.imgname="",e.vimgurl="",e.ruleForm.html="",e.ruleForm.infoTitle="",e.imageUrl="")}}))},details:function(e,t){var i=this;console.log(e,t),this.detailsVisible=!0,this.$api.post({path:"/manage/getInfoDetails",params:{token:this.token,infoId:t.infoId},success:function(e){console.log(e),i.detailsf.content=e.data.content,i.detailsf.coverImg=e.data.coverImg,i.detailsf.infoTitle=e.data.infoTitle,i.detailsf.infoType=e.data.infoType}})},edit:function(e,t){var i=this;this.editVisible=!0,this.$api.post({path:"/manage/getInfoDetails",params:{token:this.token,infoId:t.infoId},success:function(l){console.log(l),console.log(e,t),i.editf.imgurl=l.data.coverImg,i.editf.imgname=l.data.infoTitle,i.editf.resource=l.data.infoType,i.editf.infoId=l.data.infoId,1==l.data.infoType?i.editf.html=l.data.content:i.editf.vimgurl=l.data.content,i.eagreeChange(l.data.infoType)}})},ToText:function(){var e=this.editf.html;return e.replace(/<(style|script|iframe)[^>]*?>[\s\S]+?<\/\1\s*>/gi,"").replace(/<[^>]+?>/g,"").replace(/\s+/g," ").replace(/ /g," ").replace(/>/g," ")},eagreeChange:function(e){this.editf.resource=e,console.log(e)},EaddInfo:function(){var e=this;1==this.editf.resource?(this.editf.infoTitle=this.editf.html,""==this.editf.html?this.$message({message:"请将信息填写完整",type:"warning"}):this.$api.post({path:"/manage/addInfo",params:{token:this.token,type:2,infoId:this.editf.infoId,infoTitle:this.editf.imgname,coverImg:this.editf.imageUrl,infoType:this.editf.resource,content:this.editf.infoTitle},success:function(t){console.log(t),1==t.code&&(e.getfind(),e.$message({message:t.msg,type:"success"}),e.editVisible=!1)}})):(this.editf.infoTitle=this.editf.vUrl,""==this.editf.vimgurl?this.$message({message:"请上传视频",type:"warning"}):this.$api.post({path:"/manage/addInfo",params:{token:this.token,type:2,infoId:this.editf.infoId,infoTitle:this.editf.imgname,coverImg:this.editf.imageUrl,infoType:this.editf.resource,content:this.editf.infoTitle},success:function(t){console.log(t),1==t.code&&(e.getfind(),e.$message({message:t.msg,type:"success"}),e.editVisible=!1)}}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.pageSize=e,this.getfind()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.pageNum=e,this.getfind()},uploadImgs:function(e){var t=this;this.$uploadFiles("http://manager.zhizhennengyuan.com:8000/mfxapi/multifileupload",e.file).then((function(e){t.imageUrl=e.result[0].relative_url,t.imgurl=e.result[0].url,console.log(e,"res2")}))},vuploadImgs:function(e){var t=this;this.$uploadFiles("http://manager.zhizhennengyuan.com:8000/mfxapi/multifileupload",e.file).then((function(e){t.vUrl=e.result[0].relative_url,t.vimgurl=e.result[0].url,console.log(e,"res2")}))},EuploadImgs:function(e){var t=this;this.$uploadFiles("http://manager.zhizhennengyuan.com:8000/mfxapi/multifileupload",e.file).then((function(e){t.editf.imageUrl=e.result[0].relative_url,t.editf.imgurl=e.result[0].url,console.log(e,"res2")}))},EvuploadImgs:function(e){var t=this;this.$uploadFiles("http://manager.zhizhennengyuan.com:8000/mfxapi/multifileupload",e.file).then((function(e){t.editf.vUrl=e.result[0].relative_url,t.editf.vimgurl=e.result[0].url,console.log(e,"res2")}))},agreeChange:function(e){this.ruleForm.resource=e,console.log(e)},getdelete:function(){var e=this;""==this.infoIds.join(",")?this.$message({message:"请选择要删除的信息",type:"warning"}):this.$api.post({path:"/manage/addInfo",params:{token:this.token,type:3,infoIds:this.infoIds.join(",")},success:function(t){console.log(t),1==t.code&&(e.getfind(),e.editVisible=!1,e.$message({message:t.msg,type:"success"}))}})}},mounted:function(){this.getfind()},computed:{init:function(){var e=this;return{language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",width:"100%",height:400,plugins:"link lists image media code table colorpicker textcolor wordcount contextmenu",menubar:!1,toolbar:["bold italic underline strikethrough | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent blockquote | undo redo | link unlink image media | code removeformat "],branding:!1,images_upload_handler:function(t,i,l){console.log(t,"imgres1"),e.$upload(t.blob()).then((function(e){console.log(e,"imgres");var t=e.result[0].url;i(t)}))}}}}}),o=s,r=(i("e9bc"),i("2877")),n=Object(r["a"])(o,l,a,!1,null,null,null);t["default"]=n.exports},1033:function(e,t,i){},e9bc:function(e,t,i){"use strict";var l=i("1033"),a=i.n(l);a.a}}]);